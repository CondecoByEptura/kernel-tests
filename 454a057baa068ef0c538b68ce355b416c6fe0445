{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "14540c0f_237528e5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003247
      },
      "writtenOn": "2022-09-19T18:37:00Z",
      "side": 1,
      "message": "Awesome work... but does it work with python2, because that\u0027s all we have access to in the images atm?",
      "revId": "454a057baa068ef0c538b68ce355b416c6fe0445",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e063f810_5e9bac44",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1307979
      },
      "writtenOn": "2022-09-19T20:24:59Z",
      "side": 1,
      "message": "These are device tests and they don\u0027t interact with system Python (which wouldn\u0027t even be the correct arch), they use the module \"py3-launcher\" which is built from source in external/python/cpython3.",
      "parentUuid": "14540c0f_237528e5",
      "revId": "454a057baa068ef0c538b68ce355b416c6fe0445",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "79ca143d_55e5c1f7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003247
      },
      "writtenOn": "2022-09-20T03:59:46Z",
      "side": 1,
      "message": "Unfortunately that\u0027s not the only way these are run.\nIf only it was that simple.",
      "parentUuid": "e063f810_5e9bac44",
      "revId": "454a057baa068ef0c538b68ce355b416c6fe0445",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4c4e1931_c0f26009",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1307979
      },
      "writtenOn": "2022-09-20T16:16:50Z",
      "side": 1,
      "message": "That\u0027s not particularly helpful. What are \"the images\"? What are the other ways in which these tests are run?\n\nHere\u0027s the situation:\n1. This is literally the last remaining use of Python 2 in all of Android.\n2. If \"the images\" means Linux OS images used by build machines, then this is not relevant - these tests will never interact with Python from the system image, because they run on the device only. Android does not contain an arm64 Python prebuilt.\n3. Even if someone compiled these tests for host, the vts_kernel_net_tests executable contains bundled Python, that\u0027s what embedded_launcher means.\n4. Most of these tests have a dependency on Scapy, which is highly unlikely to exist on \"the images\" if they don\u0027t even contain Python 3.\n\nIt may be theoretically possible to make these tests compatible with both versions, but it\u0027s going to be very difficult and I\u0027d rather avoid this unless it\u0027s strictly necessary.",
      "parentUuid": "79ca143d_55e5c1f7",
      "revId": "454a057baa068ef0c538b68ce355b416c6fe0445",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b323109a_b750a2f5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1535516
      },
      "writtenOn": "2022-09-20T20:51:19Z",
      "side": 1,
      "message": "+1 to what Krzysztof is saying. Since this test uses `embedded_launcher: true`, we will embed the python 3 interpreter into the resulting binary, and it doesn\u0027t matter what python version(s) the host/device support.",
      "parentUuid": "4c4e1931_c0f26009",
      "revId": "454a057baa068ef0c538b68ce355b416c6fe0445",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c55ba3bc_23964bd0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-09-20T21:06:38Z",
      "side": 1,
      "message": "in the context of http://b/243057700 \"python2 dependency in kernel/tests/net/test/Android.bp\" where i was hassling him about this, he explained (over chat, sadly, so it\u0027s not in the bug) that this stuff is used two ways --- the regular way that we\u0027re familiar with, but also in some checked-in non-reproducible debian (?) image from 2015.\n\nlooks like kernel/tests/net/test/README describes it a bit. seems like the image is called net_test.rootfs.20150203 but i can\u0027t find it checked in anywhere?\n\n(if it\u0027s not actually true that these run both ways, we could just leave this python2 and remove the build support and let them worry about moving to python3 when they update their rootfs...)",
      "parentUuid": "b323109a_b750a2f5",
      "revId": "454a057baa068ef0c538b68ce355b416c6fe0445",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e79f5395_c996f302",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1307979
      },
      "writtenOn": "2022-09-20T21:37:43Z",
      "side": 1,
      "message": "The image appears to be in google3 as net_test.rootfs.20150203.xz.\n\nDebian bullseye contains Python 3.9, and there are recent changes to these rootfs scripts, so I assume someone is using/running them. It sounds to me like this is just a question of changing the bullseye.list file from python2 to python3. I added that change to this CL.\n\nMaciej, can you help update the rootfs image?",
      "parentUuid": "c55ba3bc_23964bd0",
      "revId": "454a057baa068ef0c538b68ce355b416c6fe0445",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ad2024ed_49a8a106",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1307979
      },
      "writtenOn": "2022-09-20T22:05:08Z",
      "side": 1,
      "message": "Or at least tell me how to use build_rootfs.sh to update it. I don\u0027t know what to pass as the -k and -z parameters (kernel and initramfs).",
      "parentUuid": "e79f5395_c996f302",
      "revId": "454a057baa068ef0c538b68ce355b416c6fe0445",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "efbdb4dd_354a1370",
        "filename": "net/test/pf_key.py",
        "patchSetId": 2
      },
      "lineNbr": 208,
      "author": {
        "id": 1003247
      },
      "writtenOn": "2022-09-20T04:01:20Z",
      "side": 1,
      "message": "why?",
      "range": {
        "startLine": 208,
        "startChar": 0,
        "endLine": 208,
        "endChar": 46
      },
      "revId": "454a057baa068ef0c538b68ce355b416c6fe0445",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bfdfd0a1_c207bd7b",
        "filename": "net/test/pf_key.py",
        "patchSetId": 2
      },
      "lineNbr": 208,
      "author": {
        "id": 1307979
      },
      "writtenOn": "2022-09-20T16:06:32Z",
      "side": 1,
      "message": "Copy \u0026 paste error, fixed",
      "parentUuid": "efbdb4dd_354a1370",
      "range": {
        "startLine": 208,
        "startChar": 0,
        "endLine": 208,
        "endChar": 46
      },
      "revId": "454a057baa068ef0c538b68ce355b416c6fe0445",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}