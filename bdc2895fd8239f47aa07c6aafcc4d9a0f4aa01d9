{
  "comments": [
    {
      "key": {
        "uuid": "5524f705_357343a9",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 173,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2017-09-25T15:38:36Z",
      "side": 1,
      "message": "Nit: these aren\u0027t protocols, they\u0027re types.",
      "range": {
        "startLine": 173,
        "startChar": 4,
        "endLine": 173,
        "endChar": 10
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d023598f_d022e452",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 173,
      "author": {
        "id": 1070023
      },
      "writtenOn": "2017-10-05T22:41:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5524f705_357343a9",
      "range": {
        "startLine": 173,
        "startChar": 4,
        "endLine": 173,
        "endChar": 10
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f6efbdbd_0330ab41",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 182,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2017-09-25T15:38:36Z",
      "side": 1,
      "message": "Can you add an example test name to this comment?",
      "range": {
        "startLine": 182,
        "startChar": 57,
        "endLine": 182,
        "endChar": 58
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b37e715d_d623a0f5",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 182,
      "author": {
        "id": 1070023
      },
      "writtenOn": "2017-10-05T22:41:25Z",
      "side": 1,
      "message": "Done. Also removed spaces and parens from the generated name.",
      "parentUuid": "f6efbdbd_0330ab41",
      "range": {
        "startLine": 182,
        "startChar": 57,
        "endLine": 182,
        "endChar": 58
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "243eb9be_9278ae6f",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 509,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2017-09-25T15:38:36Z",
      "side": 1,
      "message": "Is all this initialization code run on each combination of auth/crypt/family/...? If so, that could get pretty slow... is there a way to speed things up a bit by doing most of the work in setUpClass() instead of the individual test methods?",
      "range": {
        "startLine": 509,
        "startChar": 4,
        "endLine": 509,
        "endChar": 31
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da232afc_843b0361",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 509,
      "author": {
        "id": 1070023
      },
      "writtenOn": "2017-10-05T22:41:25Z",
      "side": 1,
      "message": "It typically takes less than 30 seconds to run all xfrm_test.py on my workstation. (128 tests total)\n\nI don\u0027t think that\u0027s long enough to be worried about runtimes, and I would be more worried about state leaking between tests.",
      "parentUuid": "243eb9be_9278ae6f",
      "range": {
        "startLine": 509,
        "startChar": 4,
        "endLine": 509,
        "endChar": 31
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "979287dc_247b63b3",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 509,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2017-10-06T03:27:36Z",
      "side": 1,
      "message": "That\u0027s a 30% increase in runtime of all_tests.sh. If there are opportunities to make this faster, we should take them. Can you take some time to quickly profile the tests and see if there is any low-hanging fruit?",
      "parentUuid": "da232afc_843b0361",
      "range": {
        "startLine": 509,
        "startChar": 4,
        "endLine": 509,
        "endChar": 31
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f288be6_33f7e221",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 509,
      "author": {
        "id": 1070023
      },
      "writtenOn": "2017-10-07T01:43:39Z",
      "side": 1,
      "message": "Profiling suggests that scapy\u0027s marshalling and unmarshalling of packets is relatively expensive.\n\nLow hanging fruit:\nThe TunTwister validator function currently takes a byte string as the packet to validate, but if we pass in a scapy object, some scapy build/parse operations can be avoided, taking us from 30s to 22s.\n\n\nWe probably could go further by twisting packets without the use of scapy...",
      "parentUuid": "979287dc_247b63b3",
      "range": {
        "startLine": 509,
        "startChar": 4,
        "endLine": 509,
        "endChar": 31
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f74c1fa1_273f199a",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 585,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2017-09-25T15:38:36Z",
      "side": 1,
      "message": "What if these ports are already in use? It seems safer to bind to (ADDR_ANY[family], 0) and then use sock.getsockname()[1] to get the port the socket is bound to.",
      "range": {
        "startLine": 584,
        "startChar": 0,
        "endLine": 585,
        "endChar": 21
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9afc75b5_5ce0c3a3",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 585,
      "author": {
        "id": 1070023
      },
      "writtenOn": "2017-10-05T22:41:25Z",
      "side": 1,
      "message": "If these ports are in use, then another instance of this test has failed to clean up correctly, and I am OK with getting an error in that scenario.",
      "parentUuid": "f74c1fa1_273f199a",
      "range": {
        "startLine": 584,
        "startChar": 0,
        "endLine": 585,
        "endChar": 21
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "52782bd4_b16be66e",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 585,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2017-10-06T03:27:36Z",
      "side": 1,
      "message": "Or something else is running. Or another instance of any test might have correctly bound to this port without SO_REUSEPORT, and it might be in TIME_WAIT. That\u0027s a recipe for making these tests flaky and we should not do it.",
      "parentUuid": "9afc75b5_5ce0c3a3",
      "range": {
        "startLine": 584,
        "startChar": 0,
        "endLine": 585,
        "endChar": 21
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ffe5c436_b1b1de88",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 585,
      "author": {
        "id": 1070023
      },
      "writtenOn": "2017-10-07T01:43:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "52782bd4_b16be66e",
      "range": {
        "startLine": 584,
        "startChar": 0,
        "endLine": 585,
        "endChar": 21
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "507edcc7_1115aa99",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 594,
      "author": {
        "id": 1000835
      },
      "writtenOn": "2017-09-25T15:38:36Z",
      "side": 1,
      "message": "Nit: other code in this project uses the variable name \"accepted\" for this purpose.",
      "range": {
        "startLine": 594,
        "startChar": 8,
        "endLine": 594,
        "endChar": 12
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5825afd3_4dacfb5e",
        "filename": "net/test/xfrm_test.py",
        "patchSetId": 14
      },
      "lineNbr": 594,
      "author": {
        "id": 1070023
      },
      "writtenOn": "2017-10-05T22:41:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "507edcc7_1115aa99",
      "range": {
        "startLine": 594,
        "startChar": 8,
        "endLine": 594,
        "endChar": 12
      },
      "revId": "bdc2895fd8239f47aa07c6aafcc4d9a0f4aa01d9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}